<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gov Scenario Builder: AI-Assisted Amendments Activity</title>
    <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #f4f4f4; }
        h1 { color: #333; text-align: center; }
        .step { background: white; padding: 20px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        select, input[type="radio"], textarea, button { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background: #007bff; color: white; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
        #output { white-space: pre-wrap; background: #e9ecef; padding: 15px; border-left: 4px solid #007bff; }
        .tooltip { position: relative; display: inline-block; border-bottom: 1px dotted #000; cursor: help; }
        .tooltip .tooltiptext { visibility: hidden; width: 200px; background: #555; color: #fff; text-align: center; padding: 5px; border-radius: 6px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -100px; opacity: 0; transition: opacity 0.3s; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        .format-desc { font-style: italic; color: #666; }
    </style>
</head>
<body>
    <h1>üé≠ Gov Scenario Builder</h1>
    <p style="text-align: center; color: #666;">Create your own scenario for the 22nd Amendment, 25th Amendment, Pendleton Act, or Hatch Act. AI helps brainstorm‚Äîadd your twist and explain why it applies!</p>

    <div id="wizard" class="step">
        <label>Step 1: Pick a Law/Amendment <span class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">Hover for quick facts!</span></span></label>
        <select id="topic">
            <option value="">Choose...</option>
            <option value="22nd" data-tip="Limits presidents to 2 terms (ratified 1951) to prevent long-term power grabs.">22nd Amendment</option>
            <option value="25th" data-tip="Handles presidential disability/succession (ratified 1967), e.g., VP steps in if prez can't serve.">25th Amendment</option>
            <option value="pendleton" data-tip="1883 Civil Service Reform Act: Merit-based hiring for fed jobs, ends spoils system.">Pendleton Act</option>
            <option value="hatch" data-tip="1939 Act: Bans fed employees from political campaigning on the job to stay neutral.">Hatch Act</option>
        </select>

        <label>Step 2: Choose Format (for your style!)</label>
        <div>
            <input type="radio" id="para" name="format" value="paragraph" checked><label for="para">Short Paragraph <span class="format-desc">(Quick & structured‚Äîgreat for beginners)</span></label><br>
            <input type="radio" id="skit" name="format" value="skit"><label for="skit">Skit Dialogue <span class="format-desc">(Conversational‚Äîrole-play ideas)</span></label><br>
            <input type="radio" id="comic" name="format" value="comic"><label for="comic">Comic Strip Outline <span class="format-desc">(Visual‚Äîadd drawings later!)</span></label>
        </div>

        <label>Step 3: Your Idea (optional‚ÄîAI will build on this)</label>
        <textarea id="userInput" placeholder="E.g., 'The president gets sick during a crisis...' or leave blank for a random starter." rows="3"></textarea>

        <button onclick="generateStarter()">Get AI Starter Scenario</button>
        <div id="starter"></div>
    </div>

    <div id="builder" class="step" style="display: none;">
        <label>Step 4: Refine with AI (add details or say 'make it funnier')</label>
        <textarea id="refineInput" placeholder="Your turn: What happens next? Why does the law apply?" rows="4"></textarea>
        <button onclick="refineScenario()">AI Refine & Polish</button>
    </div>

    <div id="output" class="step" style="display: none;"></div>
    <button id="exportBtn" onclick="exportScenario()" style="display: none; width: auto;">üìã Copy to Share/Perform</button>

    <script>
        const starters = {
            '22nd': ['The president wins a third election bid...', 'After two terms, the prez refuses to step down...'],
            '25th': ['The president becomes seriously ill during a national emergency...', 'VP suspects the prez is unable to lead after an accident...'],
            'pendleton': ['A new hire gets the job because of family ties to the boss...', 'A fed agency head promises promotions for campaign donors...'],
            'hatch': ['A government worker posts a campaign ad from their office computer...', 'Fed employees rally for a candidate during lunch at work...']
        };
        const explanations = {
            '22nd': 'This violates the 22nd Amendment because it limits presidents to two terms to avoid power concentration.',
            '25th': 'The 25th Amendment allows the VP and cabinet to declare the president unable to serve, ensuring continuity.',
            'pendleton': 'The Pendleton Act requires merit-based hiring to prevent corruption in civil service.',
            'hatch': 'The Hatch Act prohibits political activity by federal workers on duty to maintain neutrality.'
        };

        let currentTopic = '', currentFormat = 'paragraph', currentScenario = '', generator;

        // Tooltip setup
        document.querySelectorAll('[data-tip]').forEach(el => {
            el.innerHTML += `<span class="tooltiptext">${el.dataset.tip}</span>`;
        });

        async function initAI() {
            if (!generator) {
                generator = await Transformers.pipeline('text-generation', 'Xenova/distilgpt2');
            }
        }

        async function generateStarter() {
            await initAI();
            currentTopic = document.getElementById('topic').value;
            currentFormat = document.querySelector('input[name="format"]:checked').value;
            if (!currentTopic) return alert('Pick a law first!');

            const userIdea = document.getElementById('userInput').value || starters[currentTopic][Math.floor(Math.random() * starters[currentTopic].length)];
            const prompt = `Create a short, realistic scenario about ${currentTopic === '22nd' ? 'the 22nd Amendment' : currentTopic === '25th' ? 'the 25th Amendment' : currentTopic.toUpperCase() + ' Act'}. Start with: "${userIdea}". Format as a ${currentFormat}. End with how/why the law applies. Keep it engaging and accurate.`;

            const output = await generator(prompt, { max_new_tokens: 80, temperature: 0.8 });
            currentScenario = output[0].generated_text;
            document.getElementById('starter').innerHTML = `<strong>AI Starter:</strong><br>${currentScenario}`;
            document.getElementById('wizard').style.display = 'none';
            document.getElementById('builder').style.display = 'block';
        }

        async function refineScenario() {
            await initAI();
            const refine = document.getElementById('refineInput').value;
            if (!refine) return alert('Add your idea to refine!');

            const prompt = `${currentScenario}\nUser adds: "${refine}". Continue/refine the ${currentFormat} scenario, ensuring it accurately shows the law in action. Add creativity!`;
            const output = await generator(prompt, { max_new_tokens: 60, temperature: 0.7 });
            currentScenario = output[0].generated_text + `\n\n**Why It Applies:** ${explanations[currentTopic]}`;

            document.getElementById('output').innerHTML = currentScenario;
            document.getElementById('builder').style.display = 'none';
            document.getElementById('output').style.display = 'block';
            document.getElementById('exportBtn').style.display = 'inline-block';
        }

        function exportScenario() {
            navigator.clipboard.writeText(currentScenario).then(() => alert('Copied! Paste into Google Docs or perform for class.'));
        }

        // Format-specific tweaks
        document.querySelectorAll('input[name="format"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.value === 'comic') {
                    document.getElementById('userInput').placeholder = 'E.g., Panel 1: The prez collapses...';
                } else if (e.target.value === 'skit') {
                    document.getElementById('userInput').placeholder = 'E.g., President: I feel dizzy... VP: We need to invoke...';
                } else {
                    document.getElementById('userInput').placeholder = 'E.g., The president gets sick during a crisis...';
                }
            });
        });

        // Voice input hint (browser API)
        document.getElementById('userInput').insertAdjacentHTML('afterend', '<small><em>üí° Tap mic on mobile for voice input.</em></small>');
    </script>
</body>
</html>
How It Works in Practice (Elaborated Flow)

Load & Select (1 min): User picks amendment (tooltip reminds facts), format (differentiated entry point). AI-free so far‚Äîbuilds confidence.
Starter Generation (AI Magic, 5-10s): Hits button; DistilGPT-2 crafts a tailored opener from starters or user text. E.g., for 25th + skit: "VP: Mr. President, you're not looking well... [dialogue]". Keeps it realistic/creative.
Refine Loop (Interactive Build, 2-5 mins): User adds twists (e.g., "Make the illness from a scandal"). AI iterates, weaving in accuracy. Repeat 1-2x for depth.
Output & Mastery Check (Shareable): Polished piece auto-appends "Why It Applies" explanation. For comics: Outputs "Panel 1: [desc] üò∑ | Panel 2: [action] ‚öñÔ∏è". Copy for class skit/print.
